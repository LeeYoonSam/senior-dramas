# 예시 4: 프롬프트 테스트

생성된 프롬프트와 대본의 품질을 테스트하는 예시입니다.

## 개요

테스트 시스템을 통해 대본의 품질, 일관성, 테마 적합성을 검증합니다.

---

## Case 1: 전체 테스트 실행

### 상황
- 대본 생성 완료 후 전체 품질 검증

### 실행

```
사용자: /drama:test
```

```
미영: "시어머니의마음" 프로젝트를 테스트할게요.

      3가지 테스트를 실행합니다:
      • 프롬프트 품질 테스트
      • 일관성 테스트
      • 테마 적합성 테스트

      [테스트 중...]

      ━━━━━━━━━━━━━━━━━━━━━━━
      📊 테스트 결과
      ━━━━━━━━━━━━━━━━━━━━━━━

      종합 점수: 87/100 (등급: B)

      상세:
      • 프롬프트 품질: 85점
      • 일관성: 90점
      • 테마 적합성: 86점

      ━━━━━━━━━━━━━━━━━━━━━━━
      📋 발견된 문제
      ━━━━━━━━━━━━━━━━━━━━━━━

      [높음] 3장: 순자 말투 불일치
      - 위치: 씬2 대화
      - 문제: "~했어요" → "~했다" 혼용
      - 권장: 일관되게 "~했다" 사용

      [중간] 5장: 감정 표현 약함
      - 위치: 클라이맥스 씬
      - 문제: 절망감 표현 부족
      - 권장: 내면 독백 추가

      [낮음] 1장: 배경 설명 보강 필요
      - 위치: 씬1 내레이션
      - 문제: 시간대 불명확
      - 권장: "추석 저녁" 명시

      ━━━━━━━━━━━━━━━━━━━━━━━

      [1] 문제 자동 수정
      [2] 상세 보고서 보기
      [3] 수동으로 수정하기
```

---

## Case 2: 특정 테스트만 실행

### 일관성 테스트만 실행

```
사용자: /drama:test --type consistency
```

```
미영: 일관성 테스트를 실행할게요.

      검사 항목:
      • 캐릭터 말투 일관성
      • 캐릭터 성격 일관성
      • 설정 일치 여부
      • 시간 순서
      • 장소 연속성

      [검사 중...]

      ━━━━━━━━━━━━━━━━━━━━━━━
      🔍 일관성 테스트 결과
      ━━━━━━━━━━━━━━━━━━━━━━━

      점수: 90/100

      ✓ 김순자 말투: 일관 (경상도 사투리)
      ✓ 박민지 말투: 일관 (표준어)
      ✓ 이하늘 말투: 일관 (청소년 말투)

      ⚠ 이준혁 말투: 불일치 발견
        - 1장: 존댓말
        - 4장: 반말 혼용
        - 권장: 아내에게 반말, 어머니에게 존댓말 구분

      ✓ 시간 순서: 정상
      ✓ 장소 연속성: 정상

      ⚠ 순자 나이: 불일치
        - 1장: 68세
        - 6장: "70이 다 됐는데" (70세?)
        - 권장: 68세로 통일

      ━━━━━━━━━━━━━━━━━━━━━━━
```

### 테마 적합성 테스트만 실행

```
사용자: /drama:test --type theme-adherence
```

```
미영: 테마 적합성 테스트를 실행할게요.

      선택된 테마: 화해 (reconciliation)

      [분석 중...]

      ━━━━━━━━━━━━━━━━━━━━━━━
      🎯 테마 적합성 결과
      ━━━━━━━━━━━━━━━━━━━━━━━

      점수: 86/100

      테마 표현 강도:
      ████████░░ 80%

      감정 곡선 일치도:
      예상: 긴장→분노→희망→시도→절망→깨달음→화해→평화
      실제: 긴장→분노→희망→시도→슬픔→깨달음→화해→평화
      일치: 87%

      ⚠ 5장 "슬픔"이 "절망"보다 약함
        권장: 더 강한 갈등 표현 추가

      메시지 전달:
      의도: "용서는 자신을 위한 것"
      명확도: ████████░░ 80%

      ⚠ 6장에서 메시지가 더 명확히 드러나면 좋겠어요

      강점:
      • 화해 과정이 자연스럽게 묘사됨
      • 손녀 캐릭터가 매개체 역할 잘 수행
      • 마지막 장면이 감동적

      ━━━━━━━━━━━━━━━━━━━━━━━
```

---

## Case 3: 특정 챕터만 테스트

### 상황
- 5장만 수정 후 해당 챕터만 재테스트

### 실행

```
사용자: /drama:test --chapter 5
```

```
미영: 5장만 테스트할게요.

      [검사 중...]

      ━━━━━━━━━━━━━━━━━━━━━━━
      📝 5장 테스트 결과
      ━━━━━━━━━━━━━━━━━━━━━━━

      챕터: 5장 - 진실
      점수: 82/100

      프롬프트 품질: 80점
      • 문장 구조: 양호
      • 감정 표현: 보강 필요
      • 대화 자연스러움: 양호

      일관성: 85점
      • 캐릭터 말투: 정상
      • 이전 챕터와 연결: 정상

      테마 표현: 81점
      • 이 챕터 역할: 위기/절망
      • 실제 감정: 슬픔 (약간 약함)

      권장 사항:
      1. 순자의 절망감을 더 강하게 표현
      2. "다 내 잘못이었어..." 같은 대사 추가
      3. 내면 독백에서 후회 감정 강화

      ━━━━━━━━━━━━━━━━━━━━━━━

      [1] 권장사항 기반 자동 수정
      [2] 수동 수정
      [3] 다음 챕터 테스트
```

---

## Case 4: 문제 자동 수정

### 상황
- 테스트 결과를 바탕으로 자동 수정

### 실행

```
사용자: /drama:test
미영: [테스트 결과 표시...]

사용자: 1  (문제 자동 수정 선택)
```

```
미영: 발견된 문제를 자동 수정할게요.

      ━━━━━━━━━━━━━━━━━━━━━━━
      🔧 자동 수정 진행
      ━━━━━━━━━━━━━━━━━━━━━━━

      [1/3] 3장 순자 말투 수정
      - "했어요" → "했다"
      - 수정 완료 ✓

      [2/3] 5장 감정 표현 강화
      - 내면 독백 추가 중...
      - 수정 완료 ✓

      [3/3] 1장 시간대 명시
      - "추석 저녁" 추가
      - 수정 완료 ✓

      ━━━━━━━━━━━━━━━━━━━━━━━
      ✓ 모든 수정 완료!
      ━━━━━━━━━━━━━━━━━━━━━━━

      재테스트 중...

      새로운 점수: 92/100 (등급: A)

      개선 사항:
      • 프롬프트 품질: 85 → 90 (+5)
      • 일관성: 90 → 95 (+5)
      • 테마 적합성: 86 → 91 (+5)

      [1] 결과 저장
      [2] 추가 수정
      [3] 내보내기
```

---

## Case 5: 상세 보고서 확인

### 실행

```
사용자: /drama:test
미영: [테스트 결과...]

사용자: 2  (상세 보고서 선택)
```

```
미영: 상세 보고서를 생성했어요.

      파일: output/dramas/시어머니의마음/test-results/

      ━━━━━━━━━━━━━━━━━━━━━━━
      📊 상세 테스트 보고서
      ━━━━━━━━━━━━━━━━━━━━━━━

      ## 1. 프롬프트 품질 분석

      ### 문장 구조 (18/20)
      - 평균 문장 길이: 적절
      - 복문 비율: 30% (적절)
      - 개선점: 일부 문장 간결화 필요

      ### 어휘 선택 (17/20)
      - 시니어 친화도: 높음
      - 현대 신조어: 1건 발견
        - "갓생" (4장) → "열심히 사는" 권장

      ### 감정 표현 (16/20)
      - 감정 단어 밀도: 적절
      - 감정 변화 자연스러움: 양호
      - 개선점: 5장 절망감 강화

      ### 대화 자연스러움 (17/20)
      - 세대별 말투 구분: 양호
      - 상황별 적절성: 양호
      - 개선점: 준혁 말투 통일

      ### 내레이션 품질 (17/20)
      - 몰입감: 높음
      - 정보 전달: 적절
      - 개선점: 1장 시간 배경 보강

      ---

      ## 2. 일관성 분석

      ### 캐릭터별 말투 분석

      | 캐릭터 | 기대 | 실제 | 일치율 |
      |--------|------|------|--------|
      | 김순자 | 경상도 | 경상도 | 95% |
      | 박민지 | 표준어 | 표준어 | 98% |
      | 이준혁 | 혼용 | 혼용 | 85% |
      | 이하늘 | 청소년 | 청소년 | 97% |

      ### 설정 일치 분석

      | 항목 | 설정값 | 실제 | 일치 |
      |------|--------|------|------|
      | 순자 나이 | 68세 | 68/70 | ⚠ |
      | 갈등 기간 | 30년 | 30년 | ✓ |
      | 하늘 학년 | 6학년 | 6학년 | ✓ |

      ---

      ## 3. 챕터별 점수

      | 챕터 | 품질 | 일관성 | 테마 | 평균 |
      |------|------|--------|------|------|
      | 1장 | 84 | 90 | 85 | 86 |
      | 2장 | 86 | 92 | 88 | 89 |
      | 3장 | 82 | 88 | 85 | 85 |
      | 4장 | 87 | 90 | 86 | 88 |
      | 5장 | 80 | 85 | 81 | 82 |
      | 6장 | 88 | 92 | 90 | 90 |
      | 7장 | 89 | 93 | 91 | 91 |
      | 8장 | 90 | 95 | 92 | 92 |

      ━━━━━━━━━━━━━━━━━━━━━━━

      보고서가 저장되었어요:
      test-results/summary.json
```

---

## 테스트 명령어 정리

| 명령어 | 설명 |
|--------|------|
| `/drama:test` | 전체 테스트 |
| `/drama:test --type prompt-quality` | 품질 테스트만 |
| `/drama:test --type consistency` | 일관성 테스트만 |
| `/drama:test --type theme-adherence` | 테마 테스트만 |
| `/drama:test --chapter 5` | 특정 챕터만 |
| `/drama:test --quick` | 빠른 테스트 (주요 항목만) |

---

## 팁

1. **대본 생성 후 바로 테스트**: 문제를 조기에 발견
2. **챕터별 테스트**: 수정 후 해당 챕터만 재테스트
3. **자동 수정 활용**: 간단한 문제는 자동 수정
4. **보고서 보관**: 품질 추적용으로 보고서 저장
